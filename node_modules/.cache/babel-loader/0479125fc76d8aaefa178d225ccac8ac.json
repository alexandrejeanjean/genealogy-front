{"ast":null,"code":"var _jsxFileName = \"/Users/alex/Documents/dev/genealogy-front/src/Screens/Login/index.tsx\";\nimport React, { useEffect } from 'react';\nimport apiClient from '../../api';\nimport LocalStorageService from '../../services/LocalStorageService';\nimport LoginForm from './LoginForm';\nimport Main from '../Theme/index';\n\nfunction Login({\n  history\n}) {\n  const autoSignIn = async () => {\n    try {\n      const token = LocalStorageService._getAccessToken();\n\n      console.log(\"user :: \", token);\n\n      if (token) {\n        history.push('/dashboard');\n      }\n    } catch (err) {\n      if (err) {\n        return err;\n      }\n    }\n  };\n\n  useEffect(() => {\n    autoSignIn();\n  }, []);\n\n  const signIn = async credentials => {\n    try {\n      const response = await apiClient.post('/signin', credentials);\n      const user = response.data;\n      console.log(\"user :: \", user);\n\n      LocalStorageService._setToken(user);\n\n      return user;\n    } catch (err) {\n      if (err && err.response) {\n        const axiosError = err;\n        console.log(\"Error :: signin\", axiosError.response);\n        return axiosError.response.data;\n      }\n\n      throw err;\n    }\n  };\n\n  return React.createElement(Main, {\n    isLogged: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(LoginForm, {\n    handleSubmit: signIn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/alex/Documents/dev/genealogy-front/src/Screens/Login/index.tsx"],"names":["React","useEffect","apiClient","LocalStorageService","LoginForm","Main","Login","history","autoSignIn","token","_getAccessToken","console","log","push","err","signIn","credentials","response","post","user","data","_setToken","axiosError"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,mBAAP,MAAgC,oCAAhC;AAEA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;;AAKA,SAASC,KAAT,CAAe;AAACC,EAAAA;AAAD,CAAf,EAA0B;AAExB,QAAMC,UAAU,GAAG,YAAY;AAC7B,QAAI;AACF,YAAMC,KAAK,GAAGN,mBAAmB,CAACO,eAApB,EAAd;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBH,KAAxB;;AACA,UAAGA,KAAH,EAAU;AACRF,QAAAA,OAAO,CAACM,IAAR,CAAa,YAAb;AACD;AACF,KAND,CAME,OAAOC,GAAP,EAAY;AACZ,UAAIA,GAAJ,EAAS;AACP,eAAOA,GAAP;AACD;AACF;AACF,GAZD;;AAcAb,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,UAAU;AACX,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMO,MAAM,GAAG,MAAOC,WAAP,IAA+B;AAC5C,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMf,SAAS,CAACgB,IAAV,CAAe,SAAf,EAA0BF,WAA1B,CAAvB;AACA,YAAMG,IAAI,GAAGF,QAAQ,CAACG,IAAtB;AACAT,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBO,IAAxB;;AACAhB,MAAAA,mBAAmB,CAACkB,SAApB,CAA8BF,IAA9B;;AACA,aAAOA,IAAP;AAED,KAPD,CAOE,OAAOL,GAAP,EAAY;AACZ,UAAIA,GAAG,IAAIA,GAAG,CAACG,QAAf,EAAyB;AACvB,cAAMK,UAAU,GAAGR,GAAnB;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BU,UAAU,CAACL,QAAzC;AACA,eAAOK,UAAU,CAACL,QAAX,CAAoBG,IAA3B;AACD;;AAED,YAAMN,GAAN;AACD;AACF,GAjBD;;AAmBA,SACE,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAE,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,YAAY,EAAEC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAED,eAAeT,KAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport apiClient from '../../api'\nimport LocalStorageService from '../../services/LocalStorageService';\n\nimport LoginForm from './LoginForm';\nimport Main from '../Theme/index';\ntype Props = {\n  history: object\n}\n\nfunction Login({history}) {\n\n  const autoSignIn = async () => {\n    try {\n      const token = LocalStorageService._getAccessToken()\n      console.log(\"user :: \", token)\n      if(token) {\n        history.push('/dashboard')\n      }\n    } catch (err) {\n      if (err) {\n        return err;\n      }\n    }\n  };\n\n  useEffect(() => {\n    autoSignIn()\n  }, [])\n\n  const signIn = async (credentials: object) => {\n    try {\n      const response = await apiClient.post('/signin', credentials);\n      const user = response.data;\n      console.log(\"user :: \", user)\n      LocalStorageService._setToken(user)\n      return user;\n    \n    } catch (err) {\n      if (err && err.response) {\n        const axiosError = err \n        console.log(\"Error :: signin\",axiosError.response)\n        return axiosError.response.data;\n      }\n      \n      throw err;\n    }\n  };\n\n  return (\n    <Main isLogged={false} >\n      <LoginForm handleSubmit={signIn} />\n    </Main>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}