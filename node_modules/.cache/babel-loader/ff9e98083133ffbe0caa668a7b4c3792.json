{"ast":null,"code":"var _jsxFileName = \"/Users/alex/Documents/dev/genealogy-front/src/Screens/Login/index.tsx\";\nimport React, { useEffect } from 'react';\nimport apiClient from '../../api';\nimport LocalStorageService from '../../services/LocalStorageService';\nimport LoginForm from './LoginForm';\nimport Main from '../Theme/index';\n\nfunction Login() {\n  const autoSignIn = async () => {\n    try {\n      const user = LocalStorageService._getAccessToken();\n\n      console.log(\"user :: \", user);\n      const json = JSON.parse(user);\n\n      if (json && json.token) {\n        history.push('/dashboard');\n      }\n    } catch (err) {\n      if (err) {\n        return err;\n      }\n    }\n  };\n\n  useEffect(() => {\n    autoSignIn();\n  }, []);\n\n  const signIn = async credentials => {\n    try {\n      const response = await apiClient.post('/signin', credentials);\n      const user = response.data;\n      console.log(\"user :: \", user);\n\n      LocalStorageService._setToken(user);\n\n      return user;\n    } catch (err) {\n      if (err && err.response) {\n        const axiosError = err;\n        console.log(\"Error :: signin\", axiosError.response);\n        return axiosError.response.data;\n      }\n\n      throw err;\n    }\n  };\n\n  return React.createElement(Main, {\n    isLogged: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(LoginForm, {\n    handleSubmit: signIn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/alex/Documents/dev/genealogy-front/src/Screens/Login/index.tsx"],"names":["React","useEffect","apiClient","LocalStorageService","LoginForm","Main","Login","autoSignIn","user","_getAccessToken","console","log","json","JSON","parse","token","history","push","err","signIn","credentials","response","post","data","_setToken","axiosError"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,mBAAP,MAAgC,oCAAhC;AAEA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;;AAGA,SAASC,KAAT,GAAiB;AAEf,QAAMC,UAAU,GAAG,YAAY;AAC7B,QAAI;AACF,YAAMC,IAAI,GAAGL,mBAAmB,CAACM,eAApB,EAAb;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBH,IAAxB;AACA,YAAMI,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAb;;AACA,UAAGI,IAAI,IAAIA,IAAI,CAACG,KAAhB,EAAuB;AACrBC,QAAAA,OAAO,CAACC,IAAR,CAAa,YAAb;AACD;AACF,KAPD,CAOE,OAAOC,GAAP,EAAY;AACZ,UAAIA,GAAJ,EAAS;AACP,eAAOA,GAAP;AACD;AACF;AACF,GAbD;;AAeAjB,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,UAAU;AACX,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMY,MAAM,GAAG,MAAOC,WAAP,IAA+B;AAC5C,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMnB,SAAS,CAACoB,IAAV,CAAe,SAAf,EAA0BF,WAA1B,CAAvB;AACA,YAAMZ,IAAI,GAAGa,QAAQ,CAACE,IAAtB;AACAb,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBH,IAAxB;;AACAL,MAAAA,mBAAmB,CAACqB,SAApB,CAA8BhB,IAA9B;;AACA,aAAOA,IAAP;AAED,KAPD,CAOE,OAAOU,GAAP,EAAY;AACZ,UAAIA,GAAG,IAAIA,GAAG,CAACG,QAAf,EAAyB;AACvB,cAAMI,UAAU,GAAGP,GAAnB;AACAR,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8Bc,UAAU,CAACJ,QAAzC;AACA,eAAOI,UAAU,CAACJ,QAAX,CAAoBE,IAA3B;AACD;;AAED,YAAML,GAAN;AACD;AACF,GAjBD;;AAmBA,SACE,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAE,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,YAAY,EAAEC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAED,eAAeb,KAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport apiClient from '../../api'\nimport LocalStorageService from '../../services/LocalStorageService';\n\nimport LoginForm from './LoginForm';\nimport Main from '../Theme/index';\n\n\nfunction Login() {\n\n  const autoSignIn = async () => {\n    try {\n      const user = LocalStorageService._getAccessToken()\n      console.log(\"user :: \", user)\n      const json = JSON.parse(user)\n      if(json && json.token) {\n        history.push('/dashboard')\n      }\n    } catch (err) {\n      if (err) {\n        return err;\n      }\n    }\n  };\n\n  useEffect(() => {\n    autoSignIn()\n  }, [])\n\n  const signIn = async (credentials: object) => {\n    try {\n      const response = await apiClient.post('/signin', credentials);\n      const user = response.data;\n      console.log(\"user :: \", user)\n      LocalStorageService._setToken(user)\n      return user;\n    \n    } catch (err) {\n      if (err && err.response) {\n        const axiosError = err \n        console.log(\"Error :: signin\",axiosError.response)\n        return axiosError.response.data;\n      }\n      \n      throw err;\n    }\n  };\n\n  return (\n    <Main isLogged={false} >\n      <LoginForm handleSubmit={signIn} />\n    </Main>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}