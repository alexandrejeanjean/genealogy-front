(this["webpackJsonpgenealogy-front"]=this["webpackJsonpgenealogy-front"]||[]).push([[5],{100:function(e,t,a){},101:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(155),s=a(111),o=a(60),i=(a(96),function(e){var t=e.text,a=e.subtext,n=e.handleClick,c=e.handleDelete,s=e.picture;return r.a.createElement("div",{className:"card-wrapper"},r.a.createElement("button",{className:"card",onClick:function(){return n()}},r.a.createElement("img",{src:s,alt:""}),r.a.createElement("p",{className:"card-text"},t),r.a.createElement("p",{className:"card-subtext"}," ",a)),r.a.createElement("button",{className:"delete-btn",onClick:function(){return c()}},r.a.createElement("img",{src:o.e,alt:"delete button"})))});a(97),t.a=function(e){var t=e.datas,a=e.children,n=e.getAvatar,o=e.getSubText,l=e.handleClick,u=e.handleDelete;return r.a.createElement(c.a,null,r.a.createElement(s.a,{className:"list-item-wrapper"},r.a.createElement("ul",{className:"list-items"},t&&t.map((function(e,t){return r.a.createElement("li",{key:t+"_person"},r.a.createElement(i,{picture:n&&n(e.roleId),text:e.name||e.firstname+" "+e.lastname,subtext:o&&o(e.roleId),handleClick:function(){return l(e.id)},handleDelete:function(){return u(e)}}))})),r.a.createElement("li",null,a))))}},110:function(e,t,a){"use strict";var n=a(3),r=a(7),c=a(58),s=a.n(c),o=a(0),i=a.n(o),l=a(59),u=i.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.fluid,o=e.as,u=void 0===o?"div":o,p=e.className,m=Object(r.a)(e,["bsPrefix","fluid","as","className"]),f=Object(l.a)(a,"container"),d="string"===typeof c?"-"+c:"-fluid";return i.a.createElement(u,Object(n.a)({ref:t},m,{className:s()(p,c?""+f+d:f)}))}));u.displayName="Container",u.defaultProps={fluid:!1},t.a=u},150:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(65),r=a.n(n),c=a(66),s=a(91),o=a(0),i=a.n(o),l=a(2),u=a(110),p=a(155),m=a(111),f=a(142),d=a(82),g=a(101),b=a(98),h=a(99),v=a(63),E=a(60);a(150);t.default=function(e){var t=e.location,a=Object(l.g)(),n=Object(o.useState)([]),k=Object(s.a)(n,2),x=k[0],y=k[1],O=Object(o.useState)([]),w=Object(s.a)(O,2),N=w[0],j=w[1],S=Object(o.useState)({isVisible:!1,additionalDatas:null}),T=Object(s.a)(S,2),C=T[0],L=T[1],D=Object(o.useState)(!1),I=Object(s.a)(D,2),_=I[0],A=I[1],F=Object(o.useState)(""),J=Object(s.a)(F,2),q=J[0],G=J[1],M=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("/roles");case 3:t=e.sent,(a=t.data)&&j(a),e.next=24;break;case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=17;break}return n=e.t0,console.log("Error :: get roles",n.response),G("Sorry, an error has occured. We can't access family roles."),e.abrupt("return",n.response.data);case 17:if(!e.t0||!e.t0.request){e.next=22;break}return G(JSON.stringify(e.t0.message)),e.abrupt("return",e.t0.message);case 22:G("Error. Try again, or contact us.");case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("/families/".concat(t,"/generations"));case 3:a=e.sent,(n=a.data)&&y(n),e.next=24;break;case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=17;break}return c=e.t0,console.log("Error :: get generation",c.response),G("Sorry, an error has occured. We can't access the generation's list."),e.abrupt("return",c.response.data);case 17:if(!e.t0||!e.t0.request){e.next=22;break}return G(JSON.stringify(e.t0.message)),e.abrupt("return",e.t0.message);case 22:G("Error. Try again, or contact us.");case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e;(null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.datas)&&(P(t.state.datas),M())}),[t]);var W=function(){var e=Object(c.a)(r.a.mark((function e(a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.datas,e.prev=1,e.next=4,v.a.post("/families/".concat(n,"/generations"),{position:a.position});case 4:e.sent&&P(n),e.next=24;break;case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=17;break}return c=e.t0,console.log("Error :: create generation",c.response),G("Sorry, an error has occured. We can't create a new generation."),e.abrupt("return",c.response.data);case 17:if(!e.t0||!e.t0.request){e.next=22;break}return G(JSON.stringify(e.t0.message)),e.abrupt("return",e.t0.message);case 22:G("Error. Try again, or contact us.");case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark((function e(a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.datas,e.prev=1,e.next=4,v.a.delete("/families/".concat(n,"/generations/").concat(a));case 4:e.sent&&P(t.state.datas),e.next=24;break;case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0||!e.t0.response){e.next=17;break}return c=e.t0,console.log("Error :: delete generation",c.response),G("Sorry, an error has occured. We can't delete this generation."),e.abrupt("return",c.response.data);case 17:if(!e.t0||!e.t0.request){e.next=22;break}return G(JSON.stringify(e.t0.message)),e.abrupt("return",e.t0.message);case 22:G("Error. Try again, or contact us.");case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){if((null===N||void 0===N?void 0:N.length)>0)for(var t=0;t<N.length;t++)if(N[t].role===e)return N[t].id;return null},B=function(e){var t="";if((null===N||void 0===N?void 0:N.length)>0)for(var a=0;a<N.length;a++)if(N[a].id===e)return(t=N[a].role).charAt(0).toUpperCase()+t.substr(1);return t},H=function(){var e=Object(c.a)(r.a.mark((function e(a){var n,c,s,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.state.datas,s=C.additionalDatas||null,o=null===(n=V(a.role))||void 0===n?void 0:n.toString(),!s||!o){e.next=27;break}return e.prev=4,e.next=7,v.a.post("/families/".concat(c,"/generations/").concat(s,"/peoples"),{firstname:a.firstname,lastname:a.lastname,roleId:o});case 7:e.sent&&P(c),e.next=27;break;case 11:if(e.prev=11,e.t0=e.catch(4),!e.t0||!e.t0.response){e.next=20;break}return i=e.t0,console.log("Error :: create person",i.response),G("Sorry, an error has occured. We can't create this new person."),e.abrupt("return",i.response.data);case 20:if(!e.t0||!e.t0.request){e.next=25;break}return G(JSON.stringify(e.t0.message)),e.abrupt("return",e.t0.message);case 25:G("Error. Try again, or contact us.");case 26:throw e.t0;case 27:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(r.a.mark((function e(a){var n,c,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.familyId,c=a.generationId,s=a.id,e.prev=3,e.next=6,v.a.delete("/families/".concat(n,"/generations/").concat(c,"/peoples/").concat(s));case 6:e.sent&&P(t.state.datas),e.next=26;break;case 10:if(e.prev=10,e.t0=e.catch(3),!e.t0||!e.t0.response){e.next=19;break}return o=e.t0,console.log("Error :: delete person",o.response),G("Sorry, an error has occured. We can't delete this person."),e.abrupt("return",o.response.data);case 19:if(!e.t0||!e.t0.request){e.next=24;break}return G(JSON.stringify(e.t0.message)),e.abrupt("return",e.t0.message);case 24:G("Error. Try again, or contact us.");case 25:throw e.t0;case 26:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(d.a,{pageTitle:"Family"},i.a.createElement("section",null,i.a.createElement(u.a,{fluid:!0},i.a.createElement(p.a,null,i.a.createElement(m.a,null,i.a.createElement(f.a,{className:"back-btn",variant:"link",onClick:function(){return a.goBack()}},"< My Families")))),i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{title:"Person",show:C.isVisible,inputs:[{name:"firstname",placeholder:"Ex: Luis",inputType:"text"},{name:"lastname",placeholder:"Ex: Armstrong",inputType:"text"},{name:"role",placeholder:"Ex: Grand-father",inputType:"select",datas:N}],onHide:function(){return L({isVisible:!1,additionalDatas:null})},handleSubmit:H,errorMsg:q}),q&&i.a.createElement("p",{className:"error-text ml-5"},q),x&&x.map((function(e){return i.a.createElement(u.a,{fluid:!0,key:e.position},i.a.createElement(p.a,null,i.a.createElement(m.a,{className:"generations-wrapper"},i.a.createElement(p.a,null,i.a.createElement(m.a,{className:"generation-head"},i.a.createElement("p",null,"G\xe9n\xe9ration : ",e.position),i.a.createElement("button",{className:"delete-btn",onClick:function(){return U(e.id)}},i.a.createElement("img",{src:E.e,alt:"delete button"})))),i.a.createElement(g.a,{datas:e.peoples,getAvatar:function(e){return function(e){switch(B(e).toLowerCase()){case"father":return E.g;case"mother":return E.j;case"grand-father":return E.h;case"grand-mother":return E.i;case"son":return E.k;case"daughter":return E.d;case"baby":return E.c;default:return E.f}}(e)},getSubText:function(e){return B(e)},handleClick:function(){return console.log("click")},handleDelete:function(e){return z(e)}},i.a.createElement(h.a,{handleClick:function(){return L({isVisible:!0,additionalDatas:e.id})}})))))}))),i.a.createElement(u.a,{fluid:!0,className:"generations-wrapper"},i.a.createElement(f.a,{className:"generation-head-new",onClick:function(){return A(!0)}},i.a.createElement("img",{src:E.b,alt:""}),i.a.createElement("p",null,"New Generation")))),i.a.createElement(b.a,{title:"Generation",show:_,inputs:[{name:"position",placeholder:"Ex : 1",inputType:"text"}],onHide:function(){return A(!1)},handleSubmit:W,errorMsg:q}),q&&i.a.createElement("p",{className:"error-text ml-5"},q))}},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"g",(function(){return s})),a.d(t,"j",(function(){return o})),a.d(t,"h",(function(){return i})),a.d(t,"i",(function(){return l})),a.d(t,"k",(function(){return u})),a.d(t,"d",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"l",(function(){return d}));var n=a(67),r=a(68),c=a(69),s=a(70),o=a(71),i=a(72),l=a(73),u=a(74),p=a(75),m=a(76),f=a(77),d=a(78)},63:function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var n=a(87);function r(e){c.defaults.headers.common.Authorization=e}var c=a.n(n).a.create({baseURL:"https://family-tree-app-api.herokuapp.com/api",responseType:"json",headers:{"Content-Type":"application/json"}});t.a=c},64:function(e,t,a){"use strict";var n=a(13),r=a(14),c=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"_setToken",value:function(e){localStorage.setItem("access_token",e.token)}},{key:"_getAccessToken",value:function(){return localStorage.getItem("access_token")}},{key:"_clearToken",value:function(){localStorage.removeItem("access_token")}}]),e}();t.a=c},67:function(e,t,a){e.exports=a.p+"static/media/add.acf10428.svg"},68:function(e,t,a){e.exports=a.p+"static/media/delete.c7e35fff.svg"},69:function(e,t,a){e.exports=a.p+"static/media/add-yellow.328bb664.svg"},70:function(e,t,a){e.exports=a.p+"static/media/father.a1593cc5.svg"},71:function(e,t,a){e.exports=a.p+"static/media/mother.ce7fdc25.svg"},72:function(e,t,a){e.exports=a.p+"static/media/grandfather.e4bb3825.svg"},73:function(e,t,a){e.exports=a.p+"static/media/grandmother.2dead79e.svg"},74:function(e,t,a){e.exports=a.p+"static/media/son.0555daf9.svg"},75:function(e,t,a){e.exports=a.p+"static/media/daughter.ce7994bf.svg"},76:function(e,t,a){e.exports=a.p+"static/media/baby.2e0e5fc6.svg"},77:function(e,t,a){e.exports=a.p+"static/media/family.b0aca400.svg"},78:function(e,t,a){e.exports=a.p+"static/media/tree.92f808d9.svg"},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(65),s=a.n(c),o=a(66),i=a(161),l=a(160),u=a(2),p=a(9),m=a(63),f=a(8),d=a(64),g=a(60),b=(a(80),Object(f.c)((function(e){var t=e.isLogged,a=e.setIsLogged,n=Object(u.g)(),c=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,d.a._clearToken(),Object(m.b)(null),a(!1),n.push("/"),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0){e.next=11;break}return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?r.a.createElement(i.a,{className:"navbar",collapseOnSelect:!0,expand:"lg",bg:"white",variant:"light"},r.a.createElement(i.a.Brand,{href:"#home"},r.a.createElement("img",{src:g.l,alt:"genealogy-logo",className:"dna-logo-navbar"}),r.a.createElement("span",{className:"ml-2 main-color bold"},"Family tree")),r.a.createElement(i.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(i.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(l.a,{className:"ml-auto mr-5"},r.a.createElement(l.a.Link,{eventKey:2,as:p.b,to:"/dashboard",className:"bold"},"My Families"),r.a.createElement(l.a.Link,{eventKey:2,as:p.b,to:"/",onClick:c,className:"bold"},"Logout")))):null}))),h=function(e){var t=e.pageTitle;return t?r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h1",null,t)):null};a(81),t.a=function(e){var t=e.children,a=(e.isLogged,e.pageTitle);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.Consumer,null,(function(e){return r.a.createElement(b,{isLogged:e.isLogged})})),r.a.createElement("main",{className:"main-theme-wrapper"},r.a.createElement(h,{pageTitle:a}),t))}},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){"use strict";var n=a(18),r=a(88),c=a(13),s=a(14),o=a(16),i=a(15),l=a(0),u=a.n(l),p=a(159),m=a(153),f=a(142),d=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).checkDatas=function(){var e=n.state,t=e.name,a=e.role,r=e.firstname,c=e.lastname,s=e.position,o=n.props.title;if(["Person"].indexOf(o)>-1){if(""===a||""===r||""===c)return!0}else if(["Family"].indexOf(o)>-1){if(""===t)return!0}else{if(!(["Generation"].indexOf(o)>-1))return!1;if(!s)return!0}},n.handleChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(r.a)({},t,a))},n._handleSubmit=function(e){var t=n.props.onHide;e.preventDefault(),(0,n.props.handleSubmit)(n.state),t()},n.state={name:"",position:null,firstname:"",lastname:"",role:""},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.errorMsg,r=t.title,c=t.inputs,s=Object(n.a)(t,["errorMsg","title","inputs"]);return u.a.createElement(p.a,Object.assign({size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},s),u.a.createElement(p.a.Header,{closeButton:!0},u.a.createElement(p.a.Title,{id:"contained-modal-title-vcenter"},"New ",r)),u.a.createElement(p.a.Body,null,u.a.createElement(m.a,{onSubmit:this._handleSubmit},c.map((function(t){var a;return u.a.createElement(m.a.Group,{controlId:"familyName",key:t.placeholder},u.a.createElement(m.a.Label,null,t.name.charAt(0).toUpperCase()+t.name.substr(1)),"select"===t.inputType?u.a.createElement(m.a.Control,{as:t.inputType,name:t.name,onChange:e.handleChange,defaultValue:"DEFAULT"},u.a.createElement("option",{value:"DEFAULT",disabled:!0},"Select the role"),null===(a=t.datas)||void 0===a?void 0:a.map((function(e){return u.a.createElement("option",{key:e.role},e.role)}))):u.a.createElement(m.a.Control,{type:t.inputType,name:t.name,placeholder:t.placeholder,onChange:e.handleChange}))})),u.a.createElement(f.a,{type:"submit",className:"btn-primary mt-3",disabled:this.checkDatas()},"Create ",r)),a&&u.a.createElement("p",{className:"error-text"},a)))}}]),a}(l.PureComponent);t.a=d},99:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(60);a(100);t.a=function(e){var t=e.handleClick;return r.a.createElement("div",{className:"card-wrapper new-card"},r.a.createElement("button",{className:"card",onClick:t},r.a.createElement("img",{src:c.a,alt:"ajouter"})))}}}]);
//# sourceMappingURL=5.29fd1ead.chunk.js.map